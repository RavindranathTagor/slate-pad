import{t as n}from"./index-C8LNmUZo.js";function u(e,a){var i;let s={title:"Error",message:"An unexpected error occurred.",technical:e instanceof Error?e.message:String(e),action:"Please try again later."};if(e instanceof Error&&(s.message=e.message),r(e)){const t=e;s={...s,title:"Database Error",message:c(t),errorCode:t.code,technical:`${t.code}: ${t.message} ${t.details?`(${t.details})`:""}`}}if(o(e)){const t=e;s={...s,title:"Storage Error",message:"Failed to upload or access file",errorCode:((i=t.statusCode)==null?void 0:i.toString())||"STORAGE_ERROR",technical:t.message||t.error||JSON.stringify(t)}}a&&(s={...s,...a}),console.error("Error details:",{error:e,details:s}),n({title:s.title,description:s.message,variant:"destructive"})}function r(e){return typeof e=="object"&&e!==null&&"code"in e&&"message"in e&&"details"in e}function o(e){return typeof e=="object"&&e!==null&&("statusCode"in e||"error"in e||"message"in e)}function c(e){switch(e.code){case"PGRST116":return"The requested resource was not found.";case"23505":return"This item already exists.";case"23503":return"This operation can't be completed because the item is referenced by another resource.";case"42P01":return"The requested data table doesn't exist.";case"42501":return"You don't have permission to perform this action.";case"22P02":return"Invalid input format.";case"PGRST301":return"Your request was invalid.";default:return`Database error: ${e.message}`}}export{u as handleError};
