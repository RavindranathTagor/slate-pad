import{t as r}from"./index-DJ7cKCgd.js";function u(e,a){var i;let t={title:"Error",message:"An unexpected error occurred.",technical:e instanceof Error?e.message:String(e),action:"Please try again later."};if(e instanceof Error&&(t.message=e.message),n(e)){const s=e;t={...t,title:"Database Error",message:c(s),errorCode:s.code,technical:`${s.code}: ${s.message} ${s.details?`(${s.details})`:""}`}}if(o(e)){const s=e;t={...t,title:"Storage Error",message:"Failed to upload or access file",errorCode:((i=s.statusCode)==null?void 0:i.toString())||"STORAGE_ERROR",technical:s.message||JSON.stringify(s)}}a&&(t={...t,...a}),console.error("Error details:",{error:e,details:t}),r({title:t.title,description:t.message,variant:"destructive"})}function n(e){return typeof e=="object"&&e!==null&&"code"in e&&"message"in e&&"details"in e}function o(e){return typeof e=="object"&&e!==null&&("statusCode"in e||"error"in e)}function c(e){switch(e.code){case"PGRST116":return"The requested resource was not found.";case"23505":return"This item already exists.";case"23503":return"This operation can't be completed because the item is referenced by another resource.";case"42P01":return"The requested data table doesn't exist.";case"42501":return"You don't have permission to perform this action.";case"22P02":return"Invalid input format.";case"PGRST301":return"Your request was invalid.";default:return`Database error: ${e.message}`}}export{u as handleError};
